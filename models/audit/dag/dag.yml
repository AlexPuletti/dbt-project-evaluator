version: 2

models:
  - name: stg_direct_relationships
    description: "This table shows one record for each node in the DAG (models and sources) and its direct parent."
  - name: int_all_dag_relationships
    description: "This table shows one record for every node and each of its downstream children (including itself)."
    columns:
      - name: path
        description: unique identifier representing a distinct path from each node to another node
        tests:
          - unique
          - not_null
  - name: fct_source_fanout
    description: "This table shows each parent/child relationship where a source is the direct parent of multiple nodes in the DAG."
    tests:
      - is_empty
  - name: fct_root_models
    description: "This table shows each model with 0 direct parents."
    tests:
      - is_empty
  - name: fct_multiple_sources_joined
    description: "This table shows each parent/child relationship where a model references more than one source."
    tests:
      - is_empty
  - name: fct_unused_sources
    description: "This table shows each source with 0 children."
    tests:
      - is_empty
  - name: fct_direct_join_to_source
    description: "This table shows each parent/child reltionship where a model has a reference to both a model and a source."
    tests:
      - is_empty
  - name: fct_rejoining_of_upstream_concepts
    description: >
      "All cases where one of the parent node's direct children (direct_child_1) is ALSO the direct child of ANOTHER one of the 
      parent node's direct childen (direct_child_2). Only includes cases where the model "in between" the parent node and 
      direct_child_1 has NO other downstream dependencies."
  - name: fct_model_fanout
    description: "This table shows all parents with more direct leaf children than the threshold for fanout (determined by variable models_fanout_threshold, default 3)"
    tests:
      - is_empty